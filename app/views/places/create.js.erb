<%if flash[:warning]%>
//alert("<%=flash[:warning]%>")
$("#notice").html("<%=flash[:warning]%>")
$("#notice").show()
$('#notice').fadeOut(15000);
<%else%>
marker = null;
if(MapObject.markers.get(<%=@marker.id%>)){

  marker = MapObject.markers.get(<%=@marker.id%>)

}else{

	marker = MapObject.temp_marker
	MapObject.markers_array.push(MapObject.temp_marker);
	MapObject.markers.put(<%=@marker.id%>,marker);
	MapObject.markerClusterer.addMarker(marker,true)
	MapObject.markerClusterer.redraw();
}

fn = MapObject.markerClickFunction('<%= raw place_html(@marker,@place) %>', marker);

google.maps.event.addListener(marker, 'click', fn);
google.maps.event.addListener(marker, 'mouseover', fn);
google.maps.event.addListener(marker, 'mouseout', MapObject.markerCloseFunction);
MapObject.temp_infowindow.close();

google.maps.event.trigger(marker, 'click',1);
<%end%>



