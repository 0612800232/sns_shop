latLng = new google.maps.LatLng(<%=@marker.marker_latitude%>, <%= @marker.marker_longitude %>);

fn = MapObject.markerClickFunction('<%= raw mark_html(@marker) %>', latLng);
marker = null;
if(MapObject.markers.get(<%=@marker.id%>)){
  marker = MapObject.markers.get(<%=@marker.id%>)

}else{
	marker = MapObject.temp_marker
	MapObject.markers_array.push(MapObject.temp_marker);
	MapObject.markers.put(<%=@marker.id%>,marker);
	MapObject.markerClusterer.addMarker(marker,true)
	MapObject.markerClusterer.redraw();
}

google.maps.event.addListener(marker, 'click', fn);
MapObject.temp_infowindow.close();


